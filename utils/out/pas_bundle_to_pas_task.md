<!-- pas_bundle_to_pas_task.md
  *****************************************************************************************************
  *                                  WARNING: DO NOT EDIT THIS FILE                                   *
  *                                                                                                   *
  * This file is generated by csv_to_markdown_tabler.ipynb. Any edits you make to this file will be   *
  * overwritten                                                                                       *
  * To change the contents of this file, edit input/images/data-element-mapping.csv                     *
  *****************************************************************************************************
  -->

| PAS Task Profile Element | FHIRPath for mapping from PAS Claim Response Bundle to PAS Task  | PAS Response Bundle Mapping to PAS Task Comments  |
|--------------|-----------------------------------------------------------|---------------------------------------------------|
| Task.identifier | Bundle.entry[0].resource.identifier[0]  | Maps to the "Patient Event Trace Number" in X12 278R  |
| Task.reasonCode ( Fixed to "priorAuthorization") | Fixed to "priorAuthorization"  | Fixed to "priorAuthorization"  |
| Task.requester.identifier | Bundle.entry.where(fullUrl = %context.entry[0].resource.insurer.reference or (resource.resourceType = 'Organization' and resource.id =%context.entry[0].resource.insurer.reference.split('/').last())).resource.identifier[0]  | FHIRPath for absolute and relative references. Using the FHIRPath function. "resolve()" which is not universally supported and untested: "Bundle.entry[0].resource.insurer.resolve().resource.identifier[0] |
| "PayerUrl" Task.input (Task.input.where(''payer-url' in type,codining.code)).valueUrl | -  | See the [Endpoint Discovery Strategy](https://hl7.org/fhir/us/davinci-hrex/endpoint-discovery.html) documented in the Da Vinci Health Record Exchange (HRex) Impelementation guide |
| Task.owner.PractitionerRole.resolves().organization.identifier|Task.owner.organization.identifier | Bundle.entry.where(resource.resourceType = 'Organization' and (fullUrl = %context.entry[0].resource.requester.reference or resource.id =%context.entry[0].resource.requester.reference.split('/').last() or (fullUrl = (%context.entry.where(resource.resourceType = 'PractitionerRole' and (fullUrl = %context.entry[0].resource.requester.reference or resource.id = %context.entry[0].resource.requester.reference.split('/').last())).resource.organization.reference) or resource.id = (%context.entry.where(resource.resourceType = 'PractitionerRole' and (fullUrl = %context.entry[0].resource.requester.reference or resource.id = %context.entry[0].resource.requester.reference.split('/').last())).resource.organization.reference).split('/').last()))).resource.identifier[0] | "The ClaimResponse's requester element has a choice of Organization and PractitionerRole target types. FHIRPath for absolute and relative references. Using the FHIRPath function. "resolve()" which in not universally supported and untested: "Bundle.entry.where(resource.resourceType = 'Organization' and (fulllUrl = %context.entry[0].resource.requester.reference or fulllUrl = %context.entry[0].resource.requester.resolve().organization.reference or resource.id = %context.entry[0].resource.requester.reference.split('/').last() or resource.id = %context.entry[0].resource.requester.resolve().organization.reference.split('/').last())).resource.identifier[0]" |
| Task.owner.PractitionerRole.resolves().practitioner.identifier|Task.owner.practitioner.identifier | Bundle.entry.where(resource.resourceType = 'Practitioner' and (fullUrl = (%context.entry.where(resource.resourceType = 'PractitionerRole' and (fullUrl = %context.entry[0].resource.requester.reference or resource.id = %context.entry[0].resource.requester.reference.split('/').last())).resource.practitioner.reference) or resource.id = (%context.entry.where(resource.resourceType = 'PractitionerRole' and (fullUrl = %context.entry[0].resource.requester.reference or resource.id = %context.entry[0].resource.requester.reference.split('/').last())).resource.practitioner.reference).split('/').last())).resource.identifier[0] | The ClaimResponse's requester element has a choice of Organization and PractitionerRole target types. FHIRPath for absolute and relative references. Using the FHIRPath function. "resolve()" which in not universally supported and untested: "Bundle.entry.where(fullUrl = %context.entry[0].resource.requester.resolve().practitioner.reference or (resource.resourceType = 'Practitioner' and resource.id = %context.entry[0].resource.requester.resolve().practitioner.reference.split('/').last()).resource.identifier[0]" |
| Task.reasonReference. ( Task.reasonReference.resolves() to Claim resource) | Bundle.entry.where(fullUrl = %context.entry[0].resource.request.reference or (resource.resourceType = 'Claim' and resource.id =%context.entry[0].resource.request.reference.split('/').last())).resource  | This element may reference the local FHIR CLAIM resource that was submitted  |
| Task.input "paLineNumber" extension (Task.input.extension.where(url = 'http://hl7.org/fhir/us/davinci-pas/StructureDefinition/extension-paLineNumber').valuePositiveInt) | Bundle.entry.where(fullUrl = %context.entry[0].resource.communicationRequest.reference or (resource.resourceType = 'CommunicationRequest' and resource.id =%context.entry[0].resource.communicationRequest.reference.split('/').last())).resource.payload.extension.where(url='http://hl7.org/fhir/us/davinci-pas/StructureDefinition/extension-serviceLineNumber').valuePositiveInt | The ClaimResponse's communicationRequest element references the CommunicationRequest resource in the PAS response Bundle. Will need to iterate through the payload items FHIRPath for absolute and relative references. Using the FHIRPath function. "resolve()" which is not universally supported and untested: "Bundle.entry[0].resource.communicationRequest.resolve().resource.payload.extension.where(url='http://hl7.org/fhir/us/davinci-pas/StructureDefinition/extension-serviceLineNumber').valuePositiveInt" |
| “AttachmentsNeeded” Task.input (Task.input.where('attachments-needed' in type.coding.code.valueCodeableConcept) | Bundle.entry.where(fullUrl = %context.entry[0].resource.communicationRequest.reference or (resource.resourceType = 'CommunicationRequest' and resource.id =%context.entry[0].resource.communicationRequest.reference.split('/').last())).resource.payload.extension.where(url='http://hl7.org/fhir/us/davinci-pas/StructureDefinition/extension-contentModifier').valueCodeableConcept | The ClaimResponse's communicationRequest element references the CommunicationRequest resource in the PAS response Bundle. Will need to iterate through the payload items. FHIRPath for absolute and relative references. Using the FHIRPath function. "resolve()" which is not universally supported and untested: "Bundle.entry[0].resource.communicationRequest.resolve().resource.payload.extension.where(url='http://hl7.org/fhir/us/davinci-pas/StructureDefinition/extension-contentModifier').valueCodeableConcept" |
| Task.restriction.period | -  | ?  |
| Task.for (Task.for.resolves() to Patient resource) | Bundle.entry.where(fullUrl = %context.entry[0].resource.patient.reference or (resource.resourceType = 'Patient' and resource.id =%context.entry[0].resource.patient.reference.split('/').last())).resource  | The element may contain a local reference to the Patient.  |
| “QuestionnaireContext” Task.input.value[x] (Task.input.where('questiionnaire-context' in type.coding.code).valueString) | Bundle.entry.where(fullUrl = %context.entry[0].resource.communicationRequest.reference or (resource.resourceType = 'CommunicationRequest' and resource.id =%context.entry[0].resource.communicationRequest.reference.split('/').last())).resource.payload.extension.where(url='http://hl7.org/fhir/us/davinci-pas/StructureDefinition/extension-contentModifier').valueCodeableConcept | The ClaimResponse's communicationRequest element references the CommunicationRequest resource in the PAS response Bundle. Will need to iterate through the payload items. FHIRPath for absolute and relative references. Using the FHIRPath function. "resolve()" which is not universally supported and untested: "Bundle.entry[0].resource.communicationRequest.resolve().resource.payload.extension.where(url='http://hl7.org/fhir/us/davinci-pas/StructureDefinition/extension-contentModifier').valueCodeableConcept" |
{:.grid}

The data element mapping table is available as a [CSV](data-element-mapping.csv) and [Excel](data-element-mapping.xlsx) file.